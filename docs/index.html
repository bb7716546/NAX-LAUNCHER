<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>NAX Launcher</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
@font-face {
    font-family: "Minecraft";
    src: url("Minecraft.ttf");
}

body {
    margin: 0;
    background: #2b2b2b;
    font-family: Minecraft, Arial, Helvetica, sans-serif;
    color: #e0e0e0;
}

/* BOT VERIFY */
#verifyOverlay {
    position: fixed;
    inset: 0;
    background: #1b1b1b;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.verify-box {
    background: #111;
    border: 3px solid #000;
    padding: 25px;
    text-align: center;
    max-width: 300px;
}

/* PANELS */
.wrapper {
    max-width: 1100px;
    margin: 40px auto;
    padding: 0 15px;
}

.panel {
    background: #1f1f1f;
    border: 2px solid #111;
    padding: 20px;
    margin-bottom: 20px;
}

/* CHAT */
#secretOverlay {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
    z-index: 10000;
}
#secretOverlay.active {
    opacity: 1;
    pointer-events: auto;
}
.secret-header {
    background: #111;
    padding: 10px;
    text-align: center;
    color: #ff5555;
}
#chatMessages {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
    background: #000;
}
#chatInput {
    padding: 8px;
    border: none;
    background: #111;
    color: white;
    font-family: Minecraft;
}

/* FORUMS */
.thread {
    border: 1px solid #333;
    padding: 8px;
    margin: 6px 0;
    cursor: pointer;
}
</style>
</head>

<body>

<!-- VERIFY -->
<div id="verifyOverlay">
  <div class="verify-box">
    <h3>Verify</h3>
    <p>3 + 4 = ?</p>
    <input id="verifyInput">
    <button onclick="verify()">Enter</button>
    <p id="verifyMsg"></p>
  </div>
</div>

<!-- SECRET CHAT -->
<div id="secretOverlay">
  <div class="secret-header">NAX CHAT (Alt+F1)</div>
  <div id="chatMessages"></div>
  <input id="chatInput" placeholder="Type message or /command">
</div>

<div class="wrapper">

<!-- MAIN -->
<div class="panel">
<h1>NAX Launcher</h1>
<a href="https://github.com/bb7716546/NAX-LAUNCHER/releases/download/v1.0.0/NAX_LAUNCHER.exe">Download</a>
</div>

<!-- FORUMS -->
<div class="panel">
<h2>Forums</h2>
<input id="threadTitle" placeholder="Thread title">
<button onclick="createThread()">Create</button>
<div id="threads"></div>
</div>

<!-- ROLE PANEL -->
<div class="panel">
<h2>Admin Panel</h2>
<input id="roleUser" placeholder="Username">
<select id="roleValue">
  <option>user</option>
  <option>mod</option>
  <option>admin</option>
</select>
<button onclick="setRole()">Assign Role</button>
</div>

</div>

<script>
const API = "https://YOUR_SERVER"; // CHANGE THIS

/* VERIFY */
if (localStorage.nax_verified) verifyOverlay.style.display = "none";
function verify() {
  if (verifyInput.value === "7") {
    localStorage.nax_verified = 1;
    verifyOverlay.style.display = "none";
  } else verifyMsg.textContent = "Wrong";
}

/* CHAT */
let ws;
function openChat() {
  secretOverlay.classList.add("active");
  if (!ws) {
    ws = new WebSocket(API.replace("https","wss") + "/chat");
    ws.onmessage = e => {
      const m = JSON.parse(e.data);
      chatMessages.innerHTML += `<div><b style="color:${m.color}">[${m.role}] ${m.user}</b>: ${m.text}</div>`;
      chatMessages.scrollTop = chatMessages.scrollHeight;
    };
  }
}
window.addEventListener("keydown", e => {
  if (e.altKey && e.key === "F1") openChat();
});
chatInput.onkeydown = e => {
  if (e.key === "Enter" && ws) {
    ws.send(chatInput.value);
    chatInput.value = "";
  }
};

/* FORUMS */
async function loadThreads() {
  const r = await fetch(API + "/forums");
  const data = await r.json();
  threads.innerHTML = "";
  data.forEach(t => {
    const d = document.createElement("div");
    d.className = "thread";
    d.textContent = t.title + " by " + t.author;
    threads.appendChild(d);
  });
}
async function createThread() {
  await fetch(API + "/forums/thread", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({title:threadTitle.value})
  });
  loadThreads();
}
loadThreads();

/* ROLES */
async function setRole() {
  await fetch(API + "/admin/role", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      user: roleUser.value,
      role: roleValue.value
    })
  });
}
</script>

</body>
</html>
